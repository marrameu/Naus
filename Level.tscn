[gd_scene load_steps=21 format=2]

[ext_resource path="res://ShipCamera.gd" type="Script" id=2]
[ext_resource path="res://src/Asteroid.tscn" type="PackedScene" id=3]
[ext_resource path="res://BigShip.tscn" type="PackedScene" id=4]
[ext_resource path="res://src/PauseMenu.tscn" type="PackedScene" id=5]
[ext_resource path="res://assets/Hdri/starfield.hdr" type="Texture" id=6]
[ext_resource path="res://assets/audio/gustav_holst_mars.ogg" type="AudioStream" id=7]
[ext_resource path="res://BGMusic.gd" type="Script" id=8]
[ext_resource path="res://assets/audio/gustav_holst_jupiter.ogg" type="AudioStream" id=9]
[ext_resource path="res://assets/audio/gustav_holst_mercury.ogg" type="AudioStream" id=10]
[ext_resource path="res://DestructionBattle.gd" type="Script" id=11]
[ext_resource path="res://assets/interface/themes/new_theme.tres" type="Theme" id=12]
[ext_resource path="res://assets/interface/Fonts/Manrope/Manrope-VariableFont_wght.ttf" type="DynamicFontData" id=13]
[ext_resource path="res://src/Troops/Player/HUD/LifeBar.tscn" type="PackedScene" id=14]
[ext_resource path="res://MatchUI.gd" type="Script" id=15]
[ext_resource path="res://SpawnHUD.tscn" type="PackedScene" id=16]

[sub_resource type="SpatialMaterial" id=5]
albedo_color = Color( 0.694118, 0.709804, 0.843137, 1 )
metallic = 0.6
roughness = 0.75

[sub_resource type="PrismMesh" id=1]
size = Vector3( 50, 50, 50 )

[sub_resource type="PanoramaSky" id=2]
panorama = ExtResource( 6 )

[sub_resource type="Environment" id=3]
background_mode = 2
background_sky = SubResource( 2 )
background_energy = 5.23
ambient_light_energy = 0.0
ambient_light_sky_contribution = 0.0
tonemap_mode = 4
glow_enabled = true
glow_intensity = 0.65
glow_strength = 0.89
glow_bloom = 0.79
glow_blend_mode = 1
glow_bicubic_upscale = true

[sub_resource type="DynamicFont" id=4]
size = 64
font_data = ExtResource( 13 )

[node name="Level" type="Spatial"]
script = ExtResource( 11 )

[node name="BigShipRed" parent="." instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2441.38, 0, 0 )

[node name="BigShipBlue" parent="." instance=ExtResource( 4 )]
transform = Transform( -1, 0, 8.9407e-08, 0, 1, 0, -8.9407e-08, 0, -1, 1657.22, 0, 0 )
team_blue = true

[node name="Mesh" parent="BigShipBlue" index="1"]
material/0 = SubResource( 5 )

[node name="Camera" type="Camera" parent="."]
transform = Transform( -1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 6, -29.6491 )
far = 4000.0
script = ExtResource( 2 )

[node name="MeshInstance" type="MeshInstance" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 23, 0, 354.733 )
mesh = SubResource( 1 )
material/0 = null

[node name="Asteroide" parent="." instance=ExtResource( 3 )]
transform = Transform( 0.488834, 0, 0.872377, 0.0738027, 0.996415, -0.0413552, -0.869249, 0.0845996, 0.487082, -1947.09, -64.5744, 0 )

[node name="Asteroide2" parent="." instance=ExtResource( 3 )]
transform = Transform( -0.161337, 0.664988, 0.72922, 0.748138, 0.564302, -0.349074, -0.64363, 0.489239, -0.588546, -2030.66, 0.462402, 103.677 )

[node name="Asteroide3" parent="." instance=ExtResource( 3 )]
transform = Transform( -0.161337, 0.664988, 0.72922, 0.748138, 0.564302, -0.349074, -0.64363, 0.489239, -0.588546, -2030.66, 128.879, -250.502 )

[node name="PauseMenu" parent="." instance=ExtResource( 5 )]
layer = 9

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 0.70866, 0.457789, 0.53687, -0.635008, 0.0821853, 0.768122, 0.307515, -0.885254, 0.348941, 0, 57.0278, 0 )
light_energy = 2.0
shadow_enabled = true
directional_shadow_max_distance = 200.0

[node name="DirectionalLight2" type="DirectionalLight" parent="."]
transform = Transform( 0.279008, -0.793125, -0.541394, -0.464626, 0.381903, -0.79892, 0.840403, 0.47445, -0.261952, 0, 61.3448, 0 )
light_energy = 0.4
shadow_enabled = true

[node name="BGMusic" type="AudioStreamPlayer" parent="."]
bus = "Music"
script = ExtResource( 8 )
audio_sfx1 = ExtResource( 10 )
audio_sfx2 = ExtResource( 7 )
audio_sfx3 = ExtResource( 9 )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 3 )

[node name="Results" type="CanvasLayer" parent="."]
layer = 7

[node name="Control" type="Control" parent="Results"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
theme = ExtResource( 12 )

[node name="ColorRect" type="ColorRect" parent="Results/Control"]
anchor_right = 1.0
anchor_bottom = 1.0
color = Color( 0.223529, 0.223529, 0.223529, 0.333333 )

[node name="RichTextLabel" type="Label" parent="Results/Control"]
visible = false
modulate = Color( 0.701961, 0.701961, 1, 1 )
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -253.0
margin_top = -325.0
margin_right = 253.0
margin_bottom = -152.0
custom_fonts/font = SubResource( 4 )
text = "VICTORY"
align = 1
valign = 1

[node name="RichTextLabel2" type="Label" parent="Results/Control"]
visible = false
modulate = Color( 1, 0.701961, 0.701961, 1 )
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -253.0
margin_top = -325.0
margin_right = 253.0
margin_bottom = -152.0
custom_fonts/font = SubResource( 4 )
text = "DEFEAT"
align = 1
valign = 1

[node name="MatchUI" type="CanvasLayer" parent="."]
layer = 4
script = ExtResource( 15 )
blue_ship = NodePath("../BigShipBlue")
red_ship = NodePath("../BigShipRed")

[node name="Control" type="Control" parent="MatchUI"]
anchor_left = 0.5
anchor_right = 0.5
margin_left = -276.0
margin_top = 82.0
margin_right = 276.0
margin_bottom = 180.0

[node name="LifeBarRedShield" parent="MatchUI/Control" instance=ExtResource( 14 )]
anchor_top = 1.0
anchor_bottom = 1.0
margin_top = -20.0
margin_bottom = 0.0
value = 50.0
tint_progress = Color( 0.682353, 0.866667, 1, 0.588235 )

[node name="LifeBarRed" parent="MatchUI/Control/LifeBarRedShield" instance=ExtResource( 14 )]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -58.5
margin_top = -6.0
margin_right = 58.5
margin_bottom = 6.0
tint_progress = Color( 1, 0, 0, 1 )
nine_patch_stretch = true

[node name="LifeBarBlueShield" parent="MatchUI/Control" instance=ExtResource( 14 )]
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -125.0
margin_top = -20.0
margin_right = 0.0
margin_bottom = 0.0
tint_progress = Color( 0.682353, 0.866667, 1, 0.588235 )

[node name="LifeBarBlue" parent="MatchUI/Control/LifeBarBlueShield" instance=ExtResource( 14 )]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -58.5
margin_top = -6.0
margin_right = 58.5
margin_bottom = 6.0
tint_progress = Color( 1, 0, 0, 1 )
nine_patch_stretch = true

[node name="Label" type="Label" parent="MatchUI/Control"]
margin_right = 40.0
margin_bottom = 14.0
text = "RED:"

[node name="Label2" type="Label" parent="MatchUI/Control"]
anchor_left = 1.0
anchor_right = 1.0
margin_left = -40.0
margin_bottom = 14.0
text = "BLUE:"

[node name="SpawnHUD" parent="." instance=ExtResource( 16 )]
layer = 3

[node name="WaittingCam" type="Camera" parent="."]
transform = Transform( 0.92432, -0.173311, 0.339995, 0, 0.890927, 0.454146, -0.381619, -0.419776, 0.823502, 858.031, 1230.9, 1998.18 )
current = true
far = 4000.0

[node name="PlayerManager" type="Node" parent="."]

[connection signal="destroyed" from="BigShipRed" to="." method="_on_BigShip_destroyed"]
[connection signal="destroyed" from="BigShipBlue" to="." method="_on_BigShip_destroyed"]
[connection signal="finished" from="BGMusic" to="BGMusic" method="_on_BGMusic_finished"]
[connection signal="respawn" from="SpawnHUD" to="." method="_on_SpawnHUD_respawn"]

[editable path="BigShipBlue"]
